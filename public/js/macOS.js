"use strict";window;var Observable=function(){var s=this;return s.data,s.subs=[],s.methods={publish:function(e){if(void 0===e)return s.data;s.data=e;for(var t=0,i=s.subs.length;t<i;++t)s.subs[t](s.data)},subscribe:function(e){-1===s.subs.indexOf(e)&&s.subs.push(e)}},s.methods},view={dockAppsLabels:document.querySelectorAll("ul.dock figcaption"),dockApps:document.querySelectorAll("ul.dock li")},model={dockApps:[]},layoutController={initial:function(){this.correctLabel(view.dockAppsLabels)},correctLabel:function(s){for(var e=0,t=s.length;e<t;++e){var i=view.dockApps[e].offsetWidth,o=s[e].offsetWidth;i-o>0?s[e].style.left=(i-o)/2+"px":s[e].style.right=(i-o)/2+"px"}}},subscribeController={initial:function(){this.apps(view.dockApps)},apps:function(s){for(var e=function(e,t){var i=new Observable;i.subscribe(function(t){switch(t){case"mouse-over":for(var o=!1,c=0,a=s.length;c<a;++c)if(s[c].classList.contains("options")){o=!0;break}o||s[e].classList.contains("hover")||s[e].classList.add("hover");break;case"mouse-out":s[e].classList.contains("hover")&&s[e].classList.remove("hover");break;case"click":if(!s[e].classList.contains("options"))for(var n=0,l=s.length;n<l;++n)if(s[n].classList.contains("options")){s[n].classList.remove("options");break}s[e].classList.contains("click")||s[e].classList.add("click");break;case"release":s[e].classList.contains("click")&&s[e].classList.remove("click");break;case"active":var r=setTimeout(function(){s[e].classList.contains("activate")&&s[e].classList.remove("activate"),s[e].classList.contains("active")||s[e].classList.add("active"),clearTimeout(r)},1e3);s[e].classList.contains("activate")||s[e].classList.add("activate");break;case"inactive":s[e].classList.contains("active")&&s[e].classList.remove("active");break;case"options":for(var u=0,p=s.length;u<p;++u)s[u].classList.contains("options")&&s[u].classList.remove("options");s[e].classList.contains("options")||(s[e].classList.add("options"),s[e].classList.contains("hover")&&s[e].classList.remove("hover"));break;case"hide-options":s[e].classList.contains("options")&&s[e].classList.remove("options");break;default:console.log("SwitchError in subscribeController.apps")}model.dockApps.push(i)}),i.publish("inactive")},t=0,i=s.length;t<i;++t)e(t)}},listenerController={initial:function(){this.dockListeners(view.dockApps)},dockListeners:function(s){for(var e=0,t=s.length;e<t;++e)!function(t){var i=e,o=void 0;s[i].addEventListener("mouseover",function(){model.dockApps[i].publish("mouse-over")}),s[i].addEventListener("mouseout",function(){model.dockApps[i].publish("mouse-out")}),s[i].addEventListener("mousedown",function(){o=setTimeout(function(){model.dockApps[i].publish("options")},500),model.dockApps[i].publish("click")}),s[i].addEventListener("mouseup",function(){clearTimeout(o),model.dockApps[i].publish("release"),model.dockApps[i].publish("active")}),s[i].addEventListener("contextmenu",function(s){s.preventDefault(),model.dockApps[i].publish("options")})}()}};layoutController.initial(),subscribeController.initial(),listenerController.initial(),model.dockApps[0].publish("active");