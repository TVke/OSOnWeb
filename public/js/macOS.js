"use strict";window;var Observable=function(){var s=this;return s.data,s.subs=[],s.methods={publish:function(e){if(void 0===e)return s.data;s.data=e;for(var o=0,i=s.subs.length;o<i;++o)s.subs[o](s.data)},subscribe:function(e){-1===s.subs.indexOf(e)&&s.subs.push(e)}},s.methods},view={dockAppsLabels:document.querySelectorAll("ul.dock figcaption"),dockApps:document.querySelectorAll("ul.dock li")},model={dockApps:[]},layoutController={initial:function(){this.correctLabel(view.dockAppsLabels)},correctLabel:function(s){for(var e=0,o=s.length;e<o;++e){var i=view.dockApps[e].offsetWidth,t=s[e].offsetWidth;i-t>0?s[e].style.left=(i-t)/2+"px":s[e].style.right=(i-t)/2+"px"}}},subscribeController={initial:function(){this.apps(view.dockApps)},apps:function(s){for(var e=function(e,o){var i=new Observable;i.subscribe(function(o){switch(o){case"mouse-over":for(var t=!1,n=0,c=s.length;n<c;++n)if(s[n].classList.contains("options")){t=!0;break}t||s[e].classList.contains("hover")||s[e].classList.add("hover");break;case"mouse-out":s[e].classList.contains("hover")&&s[e].classList.remove("hover");break;case"click":if(!s[e].classList.contains("options"))for(var a=0,l=s.length;a<l;++a)if(s[a].classList.contains("options")){s[a].classList.remove("options");break}s[e].classList.contains("click")||s[e].classList.add("click");break;case"release":s[e].classList.contains("click")&&s[e].classList.remove("click");break;case"active":s[e].classList.contains("active")||s[e].classList.add("active");break;case"inactive":s[e].classList.contains("active")&&s[e].classList.remove("active");break;case"options":for(var r=0,u=s.length;r<u;++r)s[r].classList.contains("options")&&s[r].classList.remove("options");s[e].classList.contains("options")||(s[e].classList.add("options"),s[e].classList.contains("hover")&&s[e].classList.remove("hover"));break;case"hide-options":s[e].classList.contains("options")&&s[e].classList.remove("options");break;default:console.log("SwitchError in subscribeController.apps")}model.dockApps.push(i)}),i.publish("inactive")},o=0,i=s.length;o<i;++o)e(o)}},listenerController={initial:function(){this.dockListeners(view.dockApps)},dockListeners:function(s){for(var e=0,o=s.length;e<o;++e)!function(o){var i=e,t=void 0;s[i].addEventListener("mouseover",function(){model.dockApps[i].publish("mouse-over")}),s[i].addEventListener("mouseout",function(){model.dockApps[i].publish("mouse-out")}),s[i].addEventListener("mousedown",function(){t=setTimeout(function(){model.dockApps[i].publish("options")},500),model.dockApps[i].publish("click")}),s[i].addEventListener("mouseup",function(){clearTimeout(t),model.dockApps[i].publish("release")}),s[i].addEventListener("contextmenu",function(s){s.preventDefault(),model.dockApps[i].publish("options")})}()}};layoutController.initial(),subscribeController.initial(),listenerController.initial(),model.dockApps[0].publish("active");